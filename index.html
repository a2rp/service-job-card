<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Service Job Card - Ashish Ranjan</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/svg+xml" href="./images/favicon.ico" />
</head>

<body>
    <header class="topbar">
        <div class="brand">
            <strong id="shopTitle">Service Job Card</strong>
            <span class="muted" id="shopSub">Offline • LocalStorage</span>
        </div>

        <div class="actions">
            <input id="search" type="search" placeholder="Search name, phone, item, issue, ID…" />
            <button id="btnNew" class="btn">New Job</button>
            <button id="btnSettings" class="btn light">Settings</button>
            <button id="btnExport" class="btn light">Export</button>
            <label class="btn light">
                Import <input id="importFile" type="file" accept=".json" hidden />
            </label>
            <button id="btnReset" class="btn danger">Reset All</button>
        </div>
    </header>

    <!-- New Job Drawer -->
    <aside id="drawer" class="drawer">
        <form id="jobForm" autocomplete="off">
            <h3>New Job</h3>

            <div class="grid two">
                <label>Customer Name<input name="customerName" required /></label>
                <label>Phone<input name="customerPhone" type="tel" /></label>
            </div>

            <div class="grid four">
                <label>Item Type<input name="itemType" placeholder="Mobile, Laptop…" /></label>
                <label>Brand<input name="itemBrand" /></label>
                <label>Model<input name="itemModel" /></label>
                <label>Serial No.<input name="itemSerial" /></label>
            </div>

            <label>Issue / Problem<textarea name="issue" rows="2"></textarea></label>
            <label>Accessories (if any)<input name="accessories" placeholder="Charger, Cover…" /></label>

            <!-- five columns: Estimate, Advance, Tax, Total, Balance -->
            <div class="grid five">
                <label>Estimate (₹)<input name="estimate" type="number" min="0" step="0.01" /></label>
                <label>Advance (₹)<input name="advance" type="number" min="0" step="0.01" /></label>
                <label>Tax %<input name="taxPercent" type="number" min="0" step="0.01" /></label>
                <label>Total (₹)<input name="__total" data-total readonly /></label>
                <label>Balance (₹)<input name="__balance" data-balance readonly /></label>
            </div>

            <div class="grid two">
                <label>Promised Date/Time<input name="promisedAt" type="datetime-local" /></label>
                <label>Notes<input name="notes" /></label>
            </div>

            <div class="form-actions">
                <button class="btn" type="submit">Create & Add</button>
                <button class="btn light" type="button" id="btnCloseDrawer">Close</button>
            </div>
        </form>
    </aside>

    <main class="board" id="board">
        <section class="col" data-col="new">
            <header>New</header>
            <div class="list" id="col-new"></div>
        </section>

        <section class="col" data-col="in_progress">
            <header>In-Progress</header>
            <div class="list" id="col-in_progress"></div>
        </section>

        <section class="col" data-col="ready">
            <header>Ready</header>
            <div class="list" id="col-ready"></div>
        </section>

        <section class="col" data-col="picked_up">
            <header>Picked-Up</header>
            <div class="list" id="col-picked_up"></div>
        </section>
    </main>

    <!-- Job Detail Modal -->
    <div id="jobModal" class="modal">
        <div class="dialog">
            <header class="dialog-head">
                <strong>Job Detail</strong>
                <button class="icon" id="closeJobModal" aria-label="Close">✕</button>
            </header>

            <form id="jobDetailForm" class="dialog-body">
                <input type="hidden" name="id" />

                <div class="meta">
                    <span>ID: <code id="detailId"></code></span>
                    <span>Status: <b id="detailStatus"></b></span>
                    <span>Created: <span id="detailCreated"></span></span>
                </div>

                <div class="grid two">
                    <label>Name<input name="customerName" /></label>
                    <label>Phone<input name="customerPhone" /></label>
                </div>

                <div class="grid four">
                    <label>Type<input name="itemType" /></label>
                    <label>Brand<input name="itemBrand" /></label>
                    <label>Model<input name="itemModel" /></label>
                    <label>Serial<input name="itemSerial" /></label>
                </div>

                <label>Issue<textarea name="issue" rows="2"></textarea></label>
                <label>Accessories<input name="accessories" /></label>

                <!-- five columns: Estimate, Advance, Tax, Total, Balance -->
                <div class="grid five">
                    <label>Estimate (₹)<input name="estimate" type="number" step="0.01" /></label>
                    <label>Advance (₹)<input name="advance" type="number" step="0.01" /></label>
                    <label>Tax %<input name="taxPercent" type="number" step="0.01" /></label>
                    <label>Total (₹)<input name="__total" data-total readonly /></label>
                    <label>Balance (₹)<input name="__balance" data-balance readonly /></label>
                </div>

                <div class="grid two">
                    <label>Promised<input name="promisedAt" type="datetime-local" /></label>
                    <label>Notes<input name="notes" /></label>
                </div>

                <div class="dialog-actions">
                    <div class="left">
                        <button id="btnToNew" type="button" class="chip">Move: New</button>
                        <button id="btnToIn" type="button" class="chip">Move: In-Progress</button>
                        <button id="btnToReady" type="button" class="chip">Move: Ready</button>
                        <button id="btnPickup" type="button" class="chip success">Mark Picked-Up</button>
                    </div>
                    <div class="right">
                        <button id="btnPrintTicket" type="button" class="btn light">Print Ticket</button>
                        <button id="btnDeleteJob" type="button" class="btn danger">Delete</button>
                        <button class="btn" type="submit">Save</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="dialog">
            <header class="dialog-head">
                <strong>Shop Settings</strong>
                <button class="icon" id="closeSettings" aria-label="Close">✕</button>
            </header>
            <form id="settingsForm" class="dialog-body">
                <div class="grid two">
                    <label>Shop Name<input name="name" placeholder="Your Shop" /></label>
                    <label>Phone<input name="phone" /></label>
                </div>
                <label>Address<textarea name="address" rows="2" placeholder="Street, City, Pincode"></textarea></label>
                <div class="dialog-actions">
                    <button type="button" class="btn light" id="btnSettingsClear">Clear</button>
                    <button class="btn" type="submit">Save Settings</button>
                </div>
            </form>
        </div>
    </div>

    <template id="jobCardTpl">
        <article class="card">
            <div class="card-head">
                <span class="id"></span>
                <span class="promised"></span>
            </div>
            <div class="card-body">
                <div class="line name"></div>
                <div class="line item"></div>
                <div class="line issue"></div>
            </div>
            <div class="card-actions">
                <button class="chip small view">Open</button>
                <button class="chip small light print">Print</button>
                <button class="chip small danger del">Delete</button>
            </div>
        </article>
    </template>

    <script src="script.js" defer></script>
</body>

</html>